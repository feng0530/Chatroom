CREATE TABLE USERS (
    USER_ID VARCHAR2(36) PRIMARY KEY,
    NAME VARCHAR2(30) NOT NULL,
    EMAIL VARCHAR2(50) NOT NULL,
    PASSWORD VARCHAR2(60) NOT NULL,
    GENDER CHAR(1) NOT NULL CHECK (GENDER IN ('0', '1')),
    PHONE VARCHAR2(10),
    BIRTHDAY DATE,
    PHOTO VARCHAR2(255),
    LOGIN_STATUS CHAR(1) DEFAULT '0' NOT NULL CHECK (LOGIN_STATUS IN ('0', '1')),
    USER_STATUS CHAR(1) DEFAULT '0' NOT NULL CHECK (USER_STATUS IN ('0', '1', '2', '3')),
    CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    UPDATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);
COMMENT ON TABLE USERS IS '此表格儲存使用者資訊';

COMMENT ON COLUMN USERS.USER_ID IS '每位使用者的唯一識別符';
COMMENT ON COLUMN USERS.NAME IS '使用者姓名';
COMMENT ON COLUMN USERS.EMAIL IS '使用者電子郵箱';
COMMENT ON COLUMN USERS.PASSWORD IS '使用者密碼';
COMMENT ON COLUMN USERS.GENDER IS '使用者性別（0: 女，1: 男）';
COMMENT ON COLUMN USERS.PHONE IS '使用者電話號碼';
COMMENT ON COLUMN USERS.BIRTHDAY IS '使用者生日';
COMMENT ON COLUMN USERS.PHOTO IS '使用者照片的 URL 或路徑';
COMMENT ON COLUMN USERS.LOGIN_STATUS IS '使用者登錄狀態（0: 未登錄，1: 已登錄）';
COMMENT ON COLUMN USERS.USER_STATUS IS '使用者狀態（0: 未驗證，1: 已驗證，2: 第三方，3: 驗證失敗）';
COMMENT ON COLUMN USERS.CREATE_TIME IS '創建時間';
COMMENT ON COLUMN USERS.UPDATE_TIME IS '最後更新時間';

INSERT INTO C##Frank.users (user_id, name, email, password, gender) VALUES
('1', 'Fanny', 'ze871022@gmail.com', '123456', '0');
INSERT INTO C##Frank.users (user_id, name, email, password, gender, user_status) VALUES
('2', 'Frank', 'fff80705@gmail.com', '123456', '1', '1');


CREATE TABLE FRIEND (
    ID VARCHAR2(36) PRIMARY KEY,
    USERS VARCHAR2(36) NOT NULL,
    FRIEND VARCHAR2(36) NOT NULL,
    STATUS CHAR(1) DEFAULT '0' NOT NULL CHECK (STATUS IN ('0', '1', '2')),
    CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    UPDATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    FOREIGN KEY (USERS) REFERENCES USERS(USER_ID),
    FOREIGN KEY (FRIEND) REFERENCES USERS(USER_ID)
);
COMMENT ON TABLE FRIEND IS '此表格儲存好友清單資訊';

COMMENT ON COLUMN FRIEND.ID IS '每個好友清單的唯一識別符';
COMMENT ON COLUMN FRIEND.USERS IS '使用者識別ID';
COMMENT ON COLUMN FRIEND.FRIEND IS '好友識別ID';
COMMENT ON COLUMN FRIEND.STATUS IS '好友狀態（0: 待確認，1: 已確認，2: 已取消）';
COMMENT ON COLUMN FRIEND.CREATE_TIME IS '創建時間';
COMMENT ON COLUMN FRIEND.UPDATE_TIME IS '最後更新時間';

INSERT INTO friend VALUES(1, 1, 2, DEFAULT, DEFAULT, DEFAULT);

CREATE TABLE MANAGER(
    MANAGER_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(30) NOT NULL,
    ACCOUNT VARCHAR2(30) NOT NULL,
    PASSWORD VARCHAR2(60) NOT NULL,
    ROLE VARCHAR2(30) NOT NULL,
    CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    UPDATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);
COMMENT ON TABLE MANAGER IS '此表格儲存管理員資訊';

COMMENT ON COLUMN MANAGER.MANAGER_ID IS '每位管理員的唯一識別符';
COMMENT ON COLUMN MANAGER.NAME IS '管理員姓名';
COMMENT ON COLUMN MANAGER.ACCOUNT IS '管理員帳號';
COMMENT ON COLUMN MANAGER.PASSWORD IS '管理員密碼';
COMMENT ON COLUMN MANAGER.ROLE IS '管理員角色';
COMMENT ON COLUMN MANAGER.CREATE_TIME IS '創建時間';
COMMENT ON COLUMN MANAGER.UPDATE_TIME IS '最後更新時間';

INSERT INTO MANAGER VALUES (DEFAULT,'test00', 'test00', 'test00', 'ADMIN', DEFAULT, DEFAULT);
INSERT INTO MANAGER VALUES (DEFAULT,'test01', 'test01', 'test01', 'MANAGER', DEFAULT, DEFAULT);
COMMIT;
--drop table "C##FRANK"."FRIEND";
--drop table "C##FRANK"."MANAGER";
--drop table "C##FRANK"."USERS";
